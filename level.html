<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Creating a level - Yaeger Tutorial - Creating Waterworld</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="A tutorial for Waterworld, a simple game based on Yaeger ">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="import.html"><strong aria-hidden="true">2.</strong> Importing the starter code</a></li><li class="chapter-item expanded "><a href="setup.html"><strong aria-hidden="true">3.</strong> Setting up a new game</a></li><li class="chapter-item expanded "><a href="first-scene.html"><strong aria-hidden="true">4.</strong> Creating the first Scene</a></li><li class="chapter-item expanded "><a href="level.html" class="active"><strong aria-hidden="true">5.</strong> Creating a level</a></li><li class="chapter-item expanded "><a href="dynamic-entities.html"><strong aria-hidden="true">6.</strong> Adding Dynamic Entities</a></li><li class="chapter-item expanded "><a href="player-controlled.html"><strong aria-hidden="true">7.</strong> Adding a player controlled Entity</a></li><li class="chapter-item expanded "><a href="interaction.html"><strong aria-hidden="true">8.</strong> Adding interaction through collision detection</a></li><li class="chapter-item expanded "><a href="more-entities.html"><strong aria-hidden="true">9.</strong> Adding more Entities and EntitySpawners</a></li><li class="chapter-item expanded "><a href="tilemaps.html"><strong aria-hidden="true">10.</strong> Adding many entities at once</a></li><li class="chapter-item expanded "><a href="further-challenges.html"><strong aria-hidden="true">11.</strong> Further challenges</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Yaeger Tutorial - Creating Waterworld</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        <a href="https://github.com/han-yaeger/yaeger-tutorial" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="creating-a-level"><a class="header" href="#creating-a-level">Creating a level</a></h1>
<p>Now that we have a TitleScene, lets add a Game Level. Since a level is typically a Scene that contains animated
Entities, we are going to extend a <code>DynamicScene</code>.</p>
<p><img src="images/edit.png" alt="Edit" /> Add a scene called <code>GameLevel</code>, which extends a <code>DynamicScene</code>, to the <code>com.github.hanyaeger.tutorial.scenes</code>
package. Use the method <code>setupScene()</code> to set the background to the asset <code>background2.jpg</code> and the audio
to <code>waterworld.mp3</code>.</p>
<p>At this moment the level has not yet been added to the game. You have only created a new class, that needs to be
instantiated and added to the <code>YaegerGame</code>.</p>
<p><img src="images/edit.png" alt="Edit" /> Use the <code>setupScenes()</code> from the <code>Waterworld</code>-class to add <code>GameLevel</code> to the game. Choose a wise <code>id</code>.</p>
<h2 id="add-a-button-to-switch-to-the-game-scene"><a class="header" href="#add-a-button-to-switch-to-the-game-scene">Add a button to switch to the Game Scene</a></h2>
<p>Although <code>GameLevel</code> has now been added to the Yaeger Game, there is no way to reach it yet. As said before, the first
added Scene is set as the active scene and that should be the <code>TitleScene</code>. To switch to <code>GameLevel</code>
you will need to call the method <code>setActiveScene(id)</code> on the <code>Waterworld</code> class.</p>
<p>To enable this, we are going to add a button to the <code>TitleScene</code>. Clicking the button will result in switching to
<code>GameLevel</code>. As said before, everything that should appear on a Scene is an Entity. For the button we are going to use
a <code>TextEntity</code> that will need to listen to mouse-clicks. Because of the latter, we can no longer use an inline
<code>TextEntity</code> as we did for the title. We are going to create a new Class, called <code>StartButton</code> that extends <code>TextEntity</code>
, and add all the required behaviour to this Class.</p>
<h2 id="create-and-add-the-button"><a class="header" href="#create-and-add-the-button">Create and add the button</a></h2>
<p><img src="images/edit.png" alt="Edit" /> Create a new Class <code>StartButton</code> that extends <code>TextEntity</code> and place it in the package
<code>com.github.hanyaeger.tutorial.entities.buttons</code>. Use the following constructor:</p>
<pre><code class="language-java">public StartButton(Coordinate2D initialLocation){
    super(initialLocation,&quot;Play game&quot;);
    setFill(Color.PURPLE);
    setFont(HanFont.createDefaultCondensedFont(30));
}
</code></pre>
<p>As you will notice we use the text <em>Play Game</em>, set the color to <em>Purple</em> and use the condensed version of the HAN font.</p>
<p><img src="images/edit.png" alt="Edit" /> Now use the <code>setupEntities()</code> from the <code>TitleScene</code> to add the <code>StartButton</code>. Place it at the center of the
screen, just below the title.</p>
<h2 id="add-behaviour-to-handle-mouse-clicks"><a class="header" href="#add-behaviour-to-handle-mouse-clicks">Add behaviour to handle mouse clicks</a></h2>
<p>In general, to expand the behaviour of an <code>Entity</code>, you should add the appropriate Interface to the <code>Entity</code>. To let
an <code>Entity</code> listen to mouse button clicks, the <code>Entity</code> should implement the Interface <code>MouseButtonPressedListener</code>.</p>
<p><img src="images/edit.png" alt="Edit" /> Let <code>StartButton</code> implement the interface <code>MouseButtonPressedListener</code>.</p>
<p>When the user clicks on the <code>StartButton</code> the handler (<code>onMouseButtonPressed()</code>) is called. this handler should call
<code>setActiveScene()</code> on the <code>Waterworld</code> class, but this method is not available from the <code>TitleScene</code>. So lets pass the
instance of <code>Waterworld</code> to the <code>StartButton</code> and then call <code>setActiveScene()</code> from the mouse pressed handler.</p>
<p><img src="images/edit.png" alt="Edit" /> Change the constructor of <code>TitleScene</code> to</p>
<pre><code class="language-java">private Waterworld waterworld;

public TitleScene(Waterworld waterworld){
    this.waterworld=waterworld;
}
</code></pre>
<p>and supply an instance of <code>Waterworld</code> (notice the <code>this</code>) to the <code>TitleScene</code> in the <code>setupScenes</code> method:</p>
<pre><code class="language-java">@Override
protected void setupScenes(){
    addScene(0, new TitleScene(this));
    addScene(1, new GameLevel());
}
</code></pre>
<p><img src="images/edit.png" alt="Edit" /> Now do the same for the constructor of the <code>StartButton</code>. This constructor already has the location as a
parameter, so after this change it will have two parameters.</p>
<p>As the last step wel would like to add the following to the mouse button handler:</p>
<pre><code class="language-java">@Override
public void onMouseButtonPressed(MouseButton button, double x, double y){
    waterworld.setActiveScene(1);
}
</code></pre>
<p><img src="images/play.png" alt="Run" /> Run the game again. The TitleScene should now contain the title, and a start button. Clicking this start
button should switch the game to Game Level.</p>
<h2 id="add-more-behaviour-to-make-the-button-into-a-real-button"><a class="header" href="#add-more-behaviour-to-make-the-button-into-a-real-button">Add more behaviour to make the button into a real button</a></h2>
<p>The Button should work now, but it gives little visual feedback on its behaviour. We are going to add two more
interfaces to the <code>StartButton</code>, being the <code>MouseEnterListener</code> and <code>MouseExitListener</code>.</p>
<p><img src="images/edit.png" alt="Edit" /> Add the interface <code>MouseEnterListener</code> and <code>MouseExitListener</code> and implement their handlers in the following
way:</p>
<pre><code class="language-java">@Override
public void onMouseEntered(){
    setFill(Color.VIOLET);
    setCursor(Cursor.HAND);
}

@Override
public void onMouseExited(){
    setFill(Color.PURPLE);
    setCursor(Cursor.DEFAULT);
}
</code></pre>
<p>Notice how we change both the color of the <code>Entity</code> as the mouse cursor.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="first-scene.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="dynamic-entities.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="first-scene.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="dynamic-entities.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
